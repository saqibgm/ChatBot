version: "3.1"

intents:
  - greet
  - goodbye
  - login
  - help
  - inform
  - deny
  - affirm
  - stop
  - out_of_scope
  - ask_kb
  - clear
  - feedback_positive
  - feedback_negative
  - rating_1
  - rating_2
  - rating_3
  - rating_4
  - rating_5
  # E-Commerce Intents
  - search_products
  - product_details
  - check_stock
  - update_stock
  - track_order
  - get_invoice
  - update_order_status
  - list_orders
  - admin_find_product
  - admin_find_customer
  - admin_get_customer
  - admin_get_customer_details
  - admin_customer_last_orders
  - admin_token_me
  - admin_me

entities:
  # E-Commerce entities
  - product_id
  - product_name
  - order_id
  - order_status
  - stock_quantity
  - category
  - search_query
  - nop_username
  - nop_password
  - customer_id
  - customer_query
  - product_identifier
  - order_limit

slots:
  # E-Commerce slots
  product_id:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: product_id

  order_id:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: order_id

  search_query:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: product_name
      - type: from_entity
        entity: search_query

  stock_quantity:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: stock_quantity

  order_status:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: order_status

  access_token:
    type: text
    influence_conversation: false
    mappings: []

  customer_id:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: customer_id

  customer_query:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: customer_query

  product_identifier:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: product_identifier

  order_limit:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: order_limit

  customer_name:
    type: text
    influence_conversation: false
    mappings: []

  nop_username:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: nop_username

  nop_password:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: nop_password

  is_authenticated:
    type: bool
    influence_conversation: false
    mappings: []

responses:
  # E-Commerce responses
  utter_greet:
    - text: "ğŸ‘‹ **Welcome to our E-Commerce Assistant!**

I can help you with:

ğŸ” **Search Products** - Find products in our catalog
ğŸ“¦ **Product** - Get product details by ID
ğŸ‘¤ **Customer** - Get customer details by ID
ğŸ›’ **Track Orders** - Check your order status

How can I assist you today?"
      buttons:
        - title: "ğŸ” Search Products"
          payload: "/search_products"
        - title: "ğŸ“¦ Product"
          payload: "/product_details"
        - title: "ğŸ‘¤ Customer"
          payload: "/admin_get_customer"
        - title: "ğŸ›’ Track Order"
          payload: "/track_order"

  utter_goodbye:
    - text: "Goodbye! Thanks for shopping with us. Come back soon! ğŸ‘‹"

  utter_help:
    - text: "I can help you with:\n\nğŸ” **Search Products** - Find items in our catalog\nğŸ“¦ **Product** - Get product details by ID\nğŸ‘¤ **Customer** - Get customer details by ID\nğŸ›’ **Track Orders** - Get order status updates\n\nJust tell me what you need!"
      buttons:
        - title: "ğŸ” Search Products"
          payload: "/search_products"
        - title: "ğŸ“¦ Product"
          payload: "/product_details"
        - title: "ğŸ‘¤ Customer"
          payload: "/admin_get_customer"
        - title: "ğŸ›’ Track Order"
          payload: "/track_order"

  utter_ask_product_id:
    - text: "Please provide the **Product ID** (e.g., 123)."

  utter_ask_order_id:
    - text: "Please provide your **Order ID** (e.g., 10001)."

  utter_ask_product_search:
    - text: "ğŸ” What product are you looking for?"

  utter_product_not_found:
    - text: "âŒ Sorry, I couldn't find any products matching '**{search_query}**'. Try a different search term."

  utter_order_not_found:
    - text: "âŒ I couldn't find an order with ID **{order_id}**. Please check the order number."

  utter_out_of_scope:
    - text: "I'm an e-commerce assistant and can help you with products and orders. I can't help with that request."
    - text: "I'm here to help with shopping! Try asking about products or orders."
    
  utter_cleared:
    - text: "Session cleared. How can I help you now?"

  utter_ask_satisfaction:
    - text: "How satisfied are you with our service?"
      buttons:
        - title: "â­ Great"
          payload: '/feedback_positive'
        - title: "ğŸ˜ Not good"
          payload: '/feedback_negative'

  utter_thanks_positive_rating:
    - text: "Thank you for the great feedback! ğŸ‰ Is there anything else I can help you with?"

  utter_ask_improvement:
    - text: "I'm sorry to hear that. What could we do better? Your feedback helps us improve."

  utter_default:
    - text: "I'm not sure I understand. Here's what I can help you with:"
      buttons:
        - title: "ğŸ” Search Products"
          payload: '/search_products'
        - title: "ğŸ“¦ Product"
          payload: '/product_details'
        - title: "ğŸ‘¤ Customer"
          payload: '/admin_get_customer'
        - title: "ğŸ›’ Track Order"
          payload: '/help'

  # Legacy IT Support responses (keeping for backward compatibility)
  utter_ask_ticket_id:
    - text: "Please provide the **ID of the ticket** you want to check (e.g., GLPI-1234 or just 1234)."

  utter_ticket_status_info:
    - text: "The status for ticket **{ticket_id}** is **{ticket_status}**."

  utter_ticket_id_not_found:
    - text: "I couldn't find a ticket with the ID **{ticket_id}**. Please double-check the number."

  utter_stop_form:
    - text: "Okay, I've stopped the ticket creation process. What would you like to do instead?"

  utter_ask_anything_else:
    - text: "Is there anything else I can help you with?"
  
  utter_ask_update_content:
    - text: "What additional information would you like to add to the ticket?"
    
  utter_ticket_updated:
    - text: "I've added that information to your ticket."

  utter_ticket_closed:
    - text: "Great! I've marked the ticket as closed."
  
  utter_ask_target_status:
    - text: "The ticket is currently **{ticket_status}**. What should the new status be? (e.g. Processing, Solved, Pending)"
      buttons:
        - title: "Processing (Planned)"
          payload: '/inform_update{"target_status":"Processing (Planned)"}'
        - title: "Pending"
          payload: '/inform_update{"target_status":"Pending"}'
        - title: "Solved"
          payload: '/inform_update{"target_status":"Solved"}'

  utter_ask_confirm_ticket:
    - text: "I have gathered the following details:\n\n**Title:** {ticket_title}\n**Content:** {ticket_content}\n**Issue Type:** {issue_type}\n**Urgency:** {urgency}\n\nDo you want to create this ticket?"
      buttons:
        - title: "Yes, create it"
          payload: "/affirm"
        - title: "No, cancel"
          payload: "/deny"

  utter_ask_ticket_title: 
    - text: "Please provide a **short summary/title** for the problem."
      buttons:
        - title: "Cancel"
          payload: "/stop"

  utter_ask_ticket_content: 
    - text: "Now, please describe the problem **in detail** (the content for the ticket)."
      buttons:
        - title: "Cancel"
          payload: "/stop"

  utter_ask_issue_type:
    - text: "What type of issue is this? (Hardware, Software, Network, or Other)"
      buttons:
        - title: "Hardware"
          payload: '/inform{"issue_type":"Hardware"}'
        - title: "Software"
          payload: '/inform{"issue_type":"Software"}'
        - title: "Network"
          payload: '/inform{"issue_type":"Network"}'
        - title: "Other"
          payload: '/inform{"issue_type":"Other"}'
        - title: "Cancel"
          payload: "/stop"

  utter_ask_urgency:
    - text: "What is the urgency level? (Low, Medium, or High)"
      buttons:
        - title: "Low"
          payload: '/inform{"urgency":"Low"}'
        - title: "Medium"
          payload: '/inform{"urgency":"Medium"}'
        - title: "High"
          payload: '/inform{"urgency":"High"}'
        - title: "Cancel"
          payload: "/stop"
    
  utter_ticket_creation_failed:
    - text: "Sorry, I ran into an error and could not create your ticket."

  utter_ask_retry:
    - text: "Would you like to try again?"

  utter_error_occurred:
    - text: "An error occurred while processing your request."

  utter_ask_how_can_help:
    - text: "How can I help you today?"

  utter_ask_continue:
    - text: "Do you want to continue?"

  utter_ask_ticket_id_again:
    - text: "Please provide the ticket ID again."

  utter_ticket_not_found:
    - text: "Ticket not found."

  utter_operation_cancelled:
    - text: "Operation cancelled."

  utter_please_rephrase:
    - text: "I'm sorry, I didn't verify that. Could you rephrase?"

actions:
  # nopCommerce E-Commerce actions
  - action_greet
  - action_kb_search
  - action_kb_cache_status
  - action_nopcommerce_login
  - action_search_products
  - action_get_product_details
  - action_check_stock
  - action_update_stock
  - action_track_order
  - action_get_invoice
  - action_update_order_status
  - action_list_orders
  - action_admin_find_product
  - action_admin_find_customer
  - action_admin_get_customer
  - action_admin_get_customer_details
  - action_admin_customer_last_orders
  - action_admin_token_me
  - action_admin_me

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true