<div class="mb-8">
    <h2 class="text-2xl font-bold text-gray-800">Theme Builder</h2>
    <p class="text-gray-500 mt-1">Create and customize chatbot appearance</p>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Theme Editor (2/3 width) -->
    <div class="lg:col-span-2">
        <div class="card p-6 mb-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-lg font-semibold text-gray-800">Theme Settings</h3>
                <select id="theme-selector" onchange="loadTheme(this.value)"
                    class="px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none">
                    <option value="new">+ New Theme</option>
                </select>
            </div>

            <div class="space-y-4">
                <div class="flex items-center gap-2">
                    <label class="text-sm font-medium text-gray-700 w-20">Name</label>
                    <input type="text" id="theme-name" class="input-field flex-1" placeholder="My Custom Theme">
                </div>

                <!-- Theme Colors Section -->
                <div class="border-t pt-4 mt-4">
                    <h4 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                        </svg>
                        Colors
                    </h4>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Primary</label>
                            <input type="color" id="theme-primary-color" value="#6366f1"
                                class="w-8 h-8 rounded cursor-pointer border border-gray-200" onchange="syncColor('primary')">
                            <input type="text" id="theme-primary-color-text" value="#6366f1"
                                class="input-field flex-1 text-xs" oninput="syncColor('primary')">
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Secondary</label>
                            <input type="color" id="theme-secondary-color" value="#8b5cf6"
                                class="w-8 h-8 rounded cursor-pointer border border-gray-200">
                            <input type="text" id="theme-secondary-color-text" value="#8b5cf6"
                                class="input-field flex-1 text-xs" oninput="syncColor('secondary')">
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Background</label>
                            <input type="color" id="theme-bg-color" value="#ffffff"
                                class="w-8 h-8 rounded cursor-pointer border border-gray-200">
                            <input type="text" id="theme-bg-color-text" value="#ffffff"
                                class="input-field flex-1 text-xs">
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Text</label>
                            <input type="color" id="theme-text-color" value="#1f2937"
                                class="w-8 h-8 rounded cursor-pointer border border-gray-200">
                            <input type="text" id="theme-text-color-text" value="#1f2937"
                                class="input-field flex-1 text-xs">
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Font</label>
                            <select id="theme-font" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="Inter">Inter</option>
                                <option value="Roboto">Roboto</option>
                                <option value="Open Sans">Open Sans</option>
                                <option value="Poppins">Poppins</option>
                                <option value="Nunito">Nunito</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Radius</label>
                            <select id="theme-radius" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="8">8px</option>
                                <option value="12" selected>12px</option>
                                <option value="16">16px</option>
                                <option value="24">24px</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Icon Colors Section -->
                <div class="border-t pt-4 mt-4">
                    <h4 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                        </svg>
                        Icon Colors
                    </h4>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Bot</label>
                            <input type="color" id="theme-bot-color" value="#6366f1"
                                class="w-8 h-8 rounded cursor-pointer border border-gray-200" onchange="updatePreview()">
                            <input type="text" id="theme-bot-color-text" value="#6366f1"
                                class="input-field w-20 text-xs" oninput="syncIconColor('bot')">
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Button</label>
                            <input type="color" id="theme-user-color" value="#6366f1"
                                class="w-8 h-8 rounded cursor-pointer border border-gray-200" onchange="updatePreview()">
                            <input type="text" id="theme-user-color-text" value="#6366f1"
                                class="input-field w-20 text-xs" oninput="syncIconColor('user')">
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Send</label>
                            <input type="color" id="theme-send-color" value="#6366f1"
                                class="w-8 h-8 rounded cursor-pointer border border-gray-200" onchange="updatePreview()">
                            <input type="text" id="theme-send-color-text" value="#6366f1"
                                class="input-field w-20 text-xs" oninput="syncIconColor('send')">
                        </div>
                    </div>
                </div>

                <!-- Icons Section -->
                <div class="border-t pt-4 mt-4">
                    <h4 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        Icons
                    </h4>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Bot</label>
                            <select id="theme-bot-icon" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="üõí">üõí Cart</option>
                                <option value="üè™">üè™ Store</option>
                                <option value="üõçÔ∏è">üõçÔ∏è Shopping</option>
                                <option value="üì¶">üì¶ Package</option>
                                <option value="üéß">üéß Support</option>
                                <option value="üíº">üíº Business</option>
                                <option value="üè¢">üè¢ Corporate</option>
                                <option value="üí¨">üí¨ Chat</option>
                                <option value="ü§ñ">ü§ñ Robot</option>
                                <option value="‚öôÔ∏è">‚öôÔ∏è Gear</option>
                                <option value="üí°">üí° Idea</option>
                                <option value="üìä">üìä Analytics</option>
                                <option value="üîî">üîî Alert</option>
                                <option value="‚úÖ">‚úÖ Check</option>
                                <option value="üåê">üåê Globe</option>
                                <option value="‚≠ê">‚≠ê Star</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">User</label>
                            <select id="theme-user-icon" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="üë§">üë§ Person</option>
                                <option value="üë®‚Äçüíº">üë®‚Äçüíº Business</option>
                                <option value="üßë‚Äçüíª">üßë‚Äçüíª Tech</option>
                                <option value="üë®">üë® Man</option>
                                <option value="üë©">üë© Woman</option>
                                <option value="üßë">üßë Adult</option>
                                <option value="üôÇ">üôÇ Smile</option>
                                <option value="üëî">üëî Formal</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Send</label>
                            <select id="theme-send-icon" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="‚û§">‚û§ Arrow</option>
                                <option value="‚ûú">‚ûú Bold</option>
                                <option value="‚Üí">‚Üí Right</option>
                                <option value="‚ñ∂">‚ñ∂ Play</option>
                                <option value="‚¨Ü">‚¨Ü Up</option>
                                <option value="‚Üó">‚Üó Diagonal</option>
                                <option value="‚úì">‚úì Check</option>
                                <option value="‚è©">‚è© Fast</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Attach</label>
                            <select id="theme-attach-icon" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="üìé">üìé Clip</option>
                                <option value="üìå">üìå Pin</option>
                                <option value="üìÅ">üìÅ Folder</option>
                                <option value="üìÑ">üìÑ Doc</option>
                                <option value="üìã">üìã Board</option>
                                <option value="üì•">üì• Inbox</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Delete</label>
                            <select id="theme-delete-icon" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="üóëÔ∏è">üóëÔ∏è Trash</option>
                                <option value="üóë">üóë Bin</option>
                                <option value="‚ôªÔ∏è">‚ôªÔ∏è Recycle</option>
                                <option value="üßπ">üßπ Broom</option>
                                <option value="üöÆ">üöÆ Litter</option>
                                <option value="ü™£">ü™£ Bucket</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Collapse</label>
                            <select id="theme-collapse-icon" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="‚ûñ">‚ûñ Minus</option>
                                <option value="‚è∑">‚è∑ Down</option>
                                <option value="‚ñΩ">‚ñΩ Tri</option>
                                <option value="‚åÑ">‚åÑ Chev</option>
                                <option value="‚¨á">‚¨á Arrow</option>
                                <option value="üîΩ">üîΩ Btn</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Typography Section -->
                <div class="border-t pt-4 mt-4">
                    <h4 class="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                        <svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
                        </svg>
                        Typography
                    </h4>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Header</label>
                            <select id="theme-header-size" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="14">14px</option>
                                <option value="16" selected>16px</option>
                                <option value="18">18px</option>
                                <option value="20">20px</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Message</label>
                            <select id="theme-message-size" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="12">12px</option>
                                <option value="14" selected>14px</option>
                                <option value="16">16px</option>
                                <option value="18">18px</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Button</label>
                            <select id="theme-button-size" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="12">12px</option>
                                <option value="13" selected>13px</option>
                                <option value="14">14px</option>
                                <option value="16">16px</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-sm font-medium text-gray-700 w-20">Input</label>
                            <select id="theme-input-size" class="input-field w-1/2" onchange="updatePreview()">
                                <option value="13">13px</option>
                                <option value="14" selected>14px</option>
                                <option value="16">16px</option>
                                <option value="18">18px</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-2 border-t pt-4 mt-4">
                    <input type="checkbox" id="theme-default" class="w-4 h-4 rounded text-purple-600 focus:ring-purple-500">
                    <label for="theme-default" class="text-sm text-gray-700">Set as default theme</label>
                </div>
            </div>
        </div>

        <div class="flex justify-end gap-3">
            <button onclick="deleteCurrentTheme()" class="btn-secondary text-red-600 hover:bg-red-50">Delete</button>
            <button onclick="saveTheme()" class="btn-primary">Save Theme</button>
        </div>
    </div>

    <!-- Theme Preview (1/3 width) -->
    <div class="lg:col-span-1">
        <div class="card p-6 sticky top-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Preview</h3>
            <div id="theme-preview" class="theme-preview bg-gray-100 p-4" style="min-height: 480px;">
                <div id="preview-container" class="bg-white rounded-xl shadow-lg overflow-hidden max-w-sm mx-auto">
                    <!-- Preview Header -->
                    <div id="preview-header" class="px-5 py-4 text-white"
                        style="background: linear-gradient(135deg, #6366f1, #8b5cf6);">
                        <h4 class="font-semibold text-base">E-Commerce Support</h4>
                        <div class="flex items-center gap-1.5 mt-1">
                            <div class="w-1.5 h-1.5 bg-green-400 rounded-full"></div>
                            <span class="text-xs opacity-80">Online</span>
                        </div>
                    </div>
                    <!-- Preview Messages -->
                    <div class="p-4 space-y-3 bg-gray-50" style="min-height: 200px;">
                        <div class="flex gap-2">
                            <div id="preview-avatar"
                                class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm flex-shrink-0"
                                style="background: #6366f1;">üõí</div>
                            <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm text-sm max-w-[80%] border border-gray-100">
                                Hello! How can I help you today?</div>
                        </div>
                        <div class="flex gap-2 justify-end">
                            <div id="preview-user-msg" class="p-3 rounded-2xl rounded-tr-none text-white text-sm max-w-[80%]"
                                style="background: #6366f1;">I need to track my order</div>
                        </div>
                        <!-- Quick action buttons preview -->
                        <div class="flex gap-1.5 mt-2">
                            <div id="preview-action-btn-1" class="flex-1 flex flex-col items-center gap-1 rounded-lg border border-gray-200/80 bg-gray-50/60 py-2 px-1">
                                <svg class="w-4 h-4" style="color: #6366f1;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/></svg>
                                <span class="text-[10px] font-medium text-gray-500">Product</span>
                            </div>
                            <div id="preview-action-btn-2" class="flex-1 flex flex-col items-center gap-1 rounded-lg border border-gray-200/80 bg-gray-50/60 py-2 px-1">
                                <svg class="w-4 h-4" style="color: #6366f1;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 100 4 2 2 0 000-4z"/></svg>
                                <span class="text-[10px] font-medium text-gray-500">Order</span>
                            </div>
                            <div id="preview-action-btn-3" class="flex-1 flex flex-col items-center gap-1 rounded-lg border border-gray-200/80 bg-gray-50/60 py-2 px-1">
                                <svg class="w-4 h-4" style="color: #6366f1;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                                <span class="text-[10px] font-medium text-gray-500">Customer</span>
                            </div>
                        </div>
                    </div>
                    <!-- Preview Input -->
                    <div class="p-3 border-t bg-white">
                        <div class="flex gap-2 items-center">
                            <input type="text" placeholder="Type a message..."
                                class="flex-1 px-4 py-2.5 bg-gray-100/80 rounded-full text-sm border border-transparent" disabled>
                            <button id="preview-send-btn"
                                class="w-10 h-10 rounded-full text-white flex items-center justify-center shadow-sm"
                                style="background: #6366f1;">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
